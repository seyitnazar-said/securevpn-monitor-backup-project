# Проект «Безопасный VPN, Мониторинг и Резервное копирование»

## Обзор
Этот проект предоставляет безопасный VPN-сервис, кроссплатформенную систему мониторинга и автоматизированное решение для резервного копирования. Проект демонстрирует автоматизацию инфраструктуры, повышение безопасности, наблюдаемость и администрирование систем на разных платформах.

Цель проекта — создать полностью функциональную среду для управления доступом к VPN, мониторинга серверов Linux и Windows, а также обеспечения надежного резервного копирования. Сервер OpenVPN выдает клиентские сертификаты, сгенерированные Easy-RSA, а Prometheus, Grafana и экспортёры собирают и визуализируют метрики с Linux и Windows хостов. Система резервного копирования на Bash сохраняет локальные и удаленные копии в MinIO, с интеграцией мониторинга и оповещений в Grafana. Меры безопасности включают TLS через Let’s Encrypt, базовую аутентификацию Nginx, ограничения iptables, AWS Security Groups и автоматические обновления Ubuntu. Проект включает скрипты автоматизации, готовые Debian-пакеты и подробную документацию по каждому компоненту, что упрощает развертывание и сопровождение.

## Инфраструктура
Проект использует три экземпляра EC2 в AWS для сервера OpenVPN, стека мониторинга и хранения MinIO, а также локальную Windows VM для сбора метрик и сервер управления для администрирования. Сеть защищена с помощью AWS Security Groups, подсетей и ограниченных портов. Публичный DNS через DreamHost указывает на точки мониторинга. Диаграмма архитектуры доступна в `6 Documentation/images/infrastructure-diagram.png`.

## Компоненты
- **VPN и сертификаты:** Easy-RSA для генерации сертификатов и сервер OpenVPN для клиентских ключей.  
- **Мониторинг:** Prometheus, Alertmanager, Node Exporter, OpenVPN Exporter, Windows Exporter и дашборды Grafana.  
- **Система резервного копирования:** Bash-скрипт автоматизирует бэкапы в локальное хранилище (`/var/backups`) и MinIO, ведет логи в `/var/log/backup_minio.log` и предоставляет метрики для Prometheus.  
- **Меры безопасности:** TLS-сертификаты через Let’s Encrypt, базовая аутентификация Nginx, ограничения iptables, AWS Security Groups и автоматические обновления Ubuntu.

## Структура проекта
Каждый основной компонент включает собственную документацию и вспомогательные ресурсы:

- **docs/** – Руководства и заметки по каждому компоненту, включая правила Prometheus и настройку других экспортеров.  
- **scripts/** – Скрипты автоматизации установки, настройки и обслуживания.  
- **images/** – Диаграммы и скриншоты, используемые в документации.  
- **packages/** – Готовые Debian-пакеты для ручной установки.

## Использование
1. Клонируйте репозиторий.  
2. Запустите установщик или установите выбранные `.deb` пакеты на Linux-серверах.  
3. Запустите Windows Exporter на Windows VM с помощью предоставленного `.exe`.  
4. Получите доступ к дашбордам:  
   - Prometheus: `https://your-domain`  
   - Grafana: `https://your-domain`  
5. Проверьте резервные копии и метрики мониторинга через логи и дашборды.

> Для пошаговых инструкций смотрите документацию в файле `6 Documentation/docs/3 document for system administrator_ru`.

## Чему я научился
- Кроссплатформенный мониторинг (Linux и Windows) с использованием Prometheus и Grafana.  
- Безопасное развертывание и настройка публичных сервисов.  
- Автоматизация инфраструктуры, создание Debian-пакетов и стратегии резервного копирования.  
- Написание ясной, структурированной документации для сложных проектов.
